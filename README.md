# ImageEngine

[ImageEngine](https://imageengine.io) is an intelligent image CDN for optimizing, compressing and resizing images. ImageEngine will enhance your responsive images by enabling support for HTTP2, automatic webp / jpeg-2000 conversion, Client Hints and more.

It is likely that ImageEngine will shave off 50-60% of data traffic generated by images on your site. To better support mobile devices, ImageEngine relies on WURFL for server side device detection in cases where responsive images and Client Hints fall short.

[Registration](https://my.scientiamobile.com/register) is required to use ImageEngine. You can sign up for a free 30 day trial.

Images weight is by far the most important challenge to address when optimizing a web page for the plethora of devices on the web today. This is why ImageEngine will instantly give your users a better experience by reducing load time of your page. Not to mention the reduced data cost.

ImageEngine works as a CDN proxy. By referencing the ImageEngine servers and providing the full URL to the original image as a parameter, ImageEngine will identify the device, and its capabilities, and resize and optimize the image accordingly.

## Client Hints

ImageEngine can take information derived from client hints and automatically make decisions on how to best optimize your image content. You can include client hints in the header of your index.html by adding the following meta tag `<meta http-equiv="Accept-CH" content="DPR,Width,Viewport-Width"> `

## HTTP2 support

HTTP will give additional performance improvement on the network level. ImageEngine supports HTTP2 over SSL, which means that if you serve your sites and images by `https://`, ImageEngine will automatically serve all images over HTTP2.

## WebP

WebP is a lightweight image format with great quality. WebP is well supported by browsers. ImageEngine will detect if the end user's browser supports WebP and automatically convert any format to WebP to increase performance.

## JPEG 2000

JPEG 2000 is a much better image solution than the original JPEG file format. Using a sophisticated encoding method, JPEG 2000 files can compress files with less loss of, what we might consider, visual performance. In addition, the file format is less likely to be affected by ‘bit errors’ and other file system errors due to its more efficient coding structure. ImageEngine will detect if the end user's browser supports JPEG 2000 and automatically convert any format to JPEG 2000 to increase performance.

## Installation

The easiest way to use react-imageengine is to install it from NPM and include it in your own React build process.

```
npm install react-imageengine --save
```

## Usage

```
const ImageEngine = require('react-imageengine');

<ImageEngine src={"/image.jpg"} width={20} height={30} htmlAttributes={{alt:'Image alt tag'}}/>
```

Note : src parameters are required other parameters are optional

## Picture element

```
const ImageEngine, { Picture, Source } = require('react-imageengine');

  <Picture>
    <Source 
    srcSet="/images/adventure-american-bison-bison.jpg" 
    crop={"500,500,2500,1500"}
    media="(max-width: 639px)"  
    htmlAttributes={{
      alt: "ImageEngine image",
      className: "my-class"
    }} />
    <Source 
    srcSet="/images/adventure-american-bison-bison.jpg" 
    width={"300"}
    height={"300"}
    fitMethod={"cropbox"}
    media="(min-width: 640px) and (max-width: 1023px)"  
    htmlAttributes={{
      alt: "ImageEngine image",
      className: "my-class"
    }} />
    <Source 
    srcSet="/images/adventure-american-bison-bison.jpg" 
    width={"auto_500"}
    media="(min-width: 1024px)" 
    htmlAttributes={{
      alt: "ImageEngine image",
      className: "my-class"
    }} />
    <ImageEngine
    src="/images/adventure-american-bison-bison.jpg"
    htmlAttributes={{
      alt: "ImageEngine image",
      className: "my-class",
      width: "500px"
    }}
  />
  </Picture>
```

Note : src parameters are required other parameters are optional

### Directives

The following directives are available as props in your component

* width
* height
* compression
* format
* fitMethod
* passThrough
* sharpness
* rotate
* percentageOfScreen
* crop
* inline
* stripExifData

Check the [ImageEngine Documentation](https://docs.scientiamobile.com/documentation/ImageEngine/index#directives?utm_source=npmjs.com&utm_medium=page&utm_term=react-component&utm_campaign=react-component) for the list of available settings.

### HTML Attributes

HTML Attributes like the alt tag can be defined in the `htmlAttributes` prop, which requires an object to properly pass the attributes to the img tag

Example
```
htmlAttributes={{
  alt:'Example alt tag',
  className:'example-class'
}}
```

##  Registered user

Before using this React Component you need to include two environment variables in order to pull from ImageEngine. `REACT_APP_IE_DOMAIN`, which is the domain you have configured in ImageEngine. & `REACT_APP_IE_SSL`, which requires a boolean value if you want to serve through HTTPS or not.

Example:
``` 
REACT_APP_IE_DOMAIN=mysite.com.imgeng.in
REACT_APP_IE_SSL=true
```

To add these environment variables create a .env at the root of your project and assign values to these variables. You can read more about adding custom variables here [Create React App Adding Custom Variables](https://facebook.github.io/create-react-app/docs/adding-custom-environment-variables)

#To run this example

* `git clone`
* `cd example`
* create .env with the following variables
  * `REACT_APP_IE_DOMAIN=cdn.imageengine.io`
  * `REACT_APP_IE_SSL=true`
* `npm install`
* `npm start`
* example runs create-react-app
